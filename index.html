<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestion de Solicitudes de Laboratorio</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/LabFlow/manifest.json" />
    
    <!-- Apple Touch Icon (for iOS PWA) -->
    <link rel="apple-touch-icon" href="/LabFlow/logo-192.png" sizes="192x192" />
    
    <!-- Favicon (Usando PNG para mejor compatibilidad moderna) -->
    <link rel="icon" type="image/png" href="/LabFlow/favicon.png" />
    <!-- Fallback para navegadores antiguos (si tuvieras un .ico) -->
    <!-- <link rel="icon" href="/LabFlow/favicon.ico" /> -->
    <script type="module" crossorigin src="/LabFlow/assets/index-DtnqwxTQ.js"></script>
    <link rel="stylesheet" crossorigin href="/LabFlow/assets/index-Bneb1I6n.css">
  </head>

  <body>
    <div id="root"></div>
    <!-- Changed to use a relative path for the script -->
    
    <!-- Registro del Service Worker para PWA/FCM -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          // Determinar la ruta base dinámicamente
          const basePath = window.location.pathname.includes('/LabFlow/') ? '/LabFlow/' : '/';
          const swPath = basePath + 'firebase-messaging-sw.js';
          
          console.log('Registering Service Worker at path:', swPath);

          // CRÍTICO: Asegurar que el Service Worker se registre con el scope correcto.
          // Si el Service Worker está en /LabFlow/firebase-messaging-sw.js, su scope debe ser /LabFlow/
          navigator.serviceWorker.register(swPath, { scope: basePath })
            .then(registration => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch(error => {
              console.error('Service Worker registration failed:', error);
            });
        });
      }
    </script>
  </body>
</html>